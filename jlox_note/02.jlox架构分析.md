### jlox架构分析
+ CFG 像建筑图纸：只规定“这里要有墙、有门”。
+ Scanner解析原始字符串
+ Parser 像施工队：搭脚手架、留窗口、焊楼梯（优先级、左递归、错误恢复）。
+ Interpreter 像装修队：刷墙、通水电、装报警器（变量生命周期、类型检查、运行时错误）。
+ semantic-analysis语法检测
  
1. Scanner解析拿到token list
2. CFG 层：只画蓝图，不管施工
    ```bash
    program        → declaration* EOF ;
    declaration    → funDecl | varDecl | statement ;
    statement      → exprStmt | ifStmt | printStmt | block ;
    expr           → assignment ;
    assignment     → IDENTIFIER "=" assignment | logic_or ;
    ...
    ```
3. Parser 层：沿着蓝图“施工”，但要加三件套
    | 问题      | CFG 不管 | jlox 实际做法                                                                        |
    | --------- | -------- | ------------------------------------------------------------------------------------ |
    | 优先级    | 无       | **多层 non-terminal**（equality → comparison → term → factor → unary）（隐式优先级） |
    | 左递归    | 允许     | **Pratt / 循环 while** 把左递归改右递归，防止无限递归                                |
    | 结合性    | 无       | **Pratt 里 precedence table** 把 `+` 设成 LEFT，保证 `a+b+c` 从左往右                |
    | edge case | 无       | **超前看 1  token**（`check()`, `advance()`）处理 `!=` vs `!` 多字符运算符           |
    | 错误恢复  | 无       | **panic mode**——同步到下一个 `;` 或 `}` 继续 parse，不让整个文件崩                   |
4. Interpreter 层：再沿 AST 下降一次，但加了“运行时上下文”
    | 问题           | CFG 不管 | jlox 实际做法                                                  |
    | -------------- | -------- | -------------------------------------------------------------- |
    | 变量存在哪？   | 无       | **Environment 链表**一层层套作用域                             |
    | 闭包怎么捕获？ | 无       | **Function 对象里存定义时的 env 指针**                         |
    | 递归调用自己？ | 无       | **先声明后绑定**，让函数名在定义完成前就进 env                 |
    | 短路逻辑？     | 无       | **解释器里手动 if** 实现 `and/or` 的短路，不继续 eval 右操作数 |
    | 运行时类型错？ | 无       | **解释器里加 runtime check**（`checkNumberOperand`）           |
